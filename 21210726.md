# 2021/07/26

## 2021/07/22面经知识点整理2  

- 线程会共享什么资源，**JMM是什么**    
线程共享的资源有**堆、全局变量、静态变量、文件等公共资源**  
JMM指**Java内存模型**  
内存模型描述了程序中各个变量（实例域、静态域和数组元素）之间的关系，以及在实际计算机系统中将变量存储到内存和从内存中取出变量这样的底层细节。  
JMM设计系统存在一个主内存，Java中所有实例变量都存储在主存中，对于所有线程都是共享的。
每个线程都有自己的工作内存，由缓存和堆栈两部分组成，缓存保存的是主存中变量的拷贝，堆栈中保存的是线程的局部变量。  
Java内存模型，围绕着在并发过程中如何处理**原子性、可见性、有序性**这三个特性而建立的模型。  
原子性：指一个操作是不可中断的  
可见性：指在多线程情况下，当一个线程修改了某一个共享变量的值之后，其他线程是否能够立即知道这个修改  
有序性：由于编译器优化进行了指令重排操作，保证指令重排不会使串行的语义逻辑发生问题   

- 乐观锁悲观锁——数据库，java多线程里面也有？？   
悲观锁：悲观并发控制，指对数据被外界修改持保守态度，借助数据库锁机制，在修改数据之前先锁定再修改。**写多读少**  
悲观锁的实现：1.传统的关系型数据库使用锁机制，如行锁，表锁，读锁，写锁；2.Java里面的同步synchronized关键字的实现  
悲观锁主要分为共享锁（读锁，S锁）和排他锁（写锁，X锁）  
乐观锁：在数据进行提交更新的时候，才会正式对数据的冲突进行检测。**读多写少**  
乐观锁的实现：1.CAS（比较并交换） 2.版本号控制  

- linkedlist和arraylist区别，内存分配上   
底层数据结构：Arraylist底层使用的是Object数组，Linkedlist底层使用的是双向链表   
插入和删除是否受元素位置的影响   
是否支持快速随机访问  
内存空间占用：Arraylist的空间浪费主要体现在list列表的结尾会预留一定的容量空间，Linkedlist的空间花费体现在它每一个元素都需要消耗比Arraylist更多的空间。  

- 接口和抽象类  
**设计层次**：接口只提供一种方法实现契约，LIKE-A关系；抽象类即子类对象必须能够替换掉所有父类对象，IS-A；  
**使用**：一个类可以实现多个接口，不能继承多个抽象类；  
接口字段只能是static和final类型的，而抽象类的字段没有这种限制；  
接口成员只能是public，而抽象类的成员可以有多种访问权限；  


- 阻塞IO和非阻塞IO  
**阻塞IO**：在IO执行的两个阶段都被block了  
**非阻塞IO**：用户进程不断的主动询问kernel数据准备好了没有  


- java有内存泄漏吗  
内存泄露：JVM误以为此对象还在引用中，无法回收    
1. 静态集合类，HashMap、Linkedlist等，长生命周期的对象持有短生命周期对象的引用  
2. 各种连接，数据库连接、网络连接、IO连接等  
3. 变量不合理的作用域，变量定义的作用范围大于适用范围   
4. 内部类持有外部类  
5. 改变哈希值  
6. **缓存**泄露  
7. 监听器和回调  
8. **类加载器**  
9. **全局变量**  

- 类加载机制和双亲委派  
类加载过程：加载->连接->初始化，连接分为：验证->准备->解析  
双亲委派模型，即在类加载的时候，系统会首先判断当前类是否被加载过，已经被加载的类会直接返回，否则才会尝试加载。  

- BIO和NIO区别  == 阻塞IO和非阻塞IO


- IP是可靠的吗，TCP如何保证可靠  
IP协议是不可靠无连接的。  
因为每个IP数据报都是独立寻址的，就是说每个IP数据报都是一个独立的实体，不需要维护后续分组相关的状态信息。  
TCP使用**超时重传**来实现可靠传输：如果一个已经发送的报文段在超时时间内没有收到确认，那么就重传这个报文段。

- JUC包，提到线程池和synchronized，线程池常用哪些参数（什么是JUC包）  
JUC，java.util.concurrent包，是JDK提供的一个处理并发的工具包，包括线程池、异步IO和轻量级任务框架，还提供了用于多线程上下文中的Collection实现等。  
**atomic**包，里面存放的是支持原子操作的、处理基本数据类型的类，该包下大量使用到了CAS技术。  
**locks**包，里面存放的是实现处理并发的类，该包大量使用到AQS技术。


![image](https://user-images.githubusercontent.com/87803098/127113490-ca00a400-0cfc-4b4c-9e3f-55fbce9b2e21.png)


- core满了以后会怎么，如果没有设置core，不断的有请求，会发生什么（什么是core）  


- 主键索引和二级索引的区别和联系  


- 死锁的四个条件（*下面正好同学今天也问到了*）  


- redis如何持久化  


- http和https区别，https头部有哪些信息  


- java有没有内存溢出  


- arraylist如何扩容


- 静态变量在哪个部分存


- set底层实现

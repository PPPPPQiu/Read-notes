# 2021/08/02  

## 知识点再看  

## 计算机网络  

应用层：**HTTP、DNS**，*报文*  
传输层：**TCP**-*报文段*、**UDP**-*用户数据报*   
网络层：**IP、ICMP、ARP**，*分组*（路由器）   
数据链路层：**MAC、VLAN**，*帧*（网桥，交换机）   
物理层：*比特流*（中继器，集线器）   


### 链路层  
1. 封装成帧  
2. 透明传输    
3. 差错检测-**循环冗余检验CRC**     

#### 信道分类  
1. 广播信道-CSMA/CD协议，信道复用技术  
2. 点对点信道-PPP协议  

#### CSMA/CD协议  
- **多点接入**，总线型网络  
- **载波监听**  
- **碰撞检测**  

#### MAC地址，**6字节，48位**  
一台主机有多少个网络适配器就有多少个MAC地址  

#### 局域网  
分为以太网、令牌环网、FDDI和ATM等  

#### 以太网  
一种**星型**拓扑结构局域网，以前用**集线器**，后来用**交换机**   
FCS：帧检验序列，使用CRC检验方法  

#### 交换机  
具有**自学习能力**，交换机存储着**MAC地址到接口的映射**  

#### 虚拟局域网  
同一个虚拟局域网中的成员才会收到**链路层广播信息**  
使用**VLAN干线连接**来建立虚拟局域网  

### 网络层  
> 网络层实现主机之间的通信，而链路层实现具体每段链路之间的通信。因此在通信过程中，IP 数据报的源地址和目的地址始终不变，而 MAC 地址随着链路的改变而改变。  


- **地址解析协议ARP**：实现由IP地址得到MAC地址,ARP高速缓存着IP地址到MAC地址的映射表  
- **网际控制报文协议ICMP**：封装在IP数据报中，不属于高层协议，为了更有效地转发IP数据报和交付成功地机会，分为差错报告报文和询问报文，**Ping**和**Traceroute**      
- **网际组管理协议IGMP**  

#### 虚拟专用网VPN  

#### 网络地址转换NAT
专用网内部的主机使用本地 IP 地址又想和互联网上的主机通信时，可以使用 NAT 来将本地 IP 转换为全球 IP。  

#### 路由器  
路由器从功能上可以划分为：路由选择和分组转发。  
分组转发结构由三个部分组成：交换结构、一组输入端口和一组输出端口。  

##### 路由器分组转发流程  

##### 路由选择协议  

- 自治系统内部：RIP、OSPF
- 自治系统间：BGP

RIP：基于距离向量地路由选择协议  
OSPF：开放最短路径优先  
BGP：边界网关协议  

### 传输层  
> 网络层只把分组发送到目的主机，但是真正通信的并不是主机而是主机中的进程，传输层提供了进程间的逻辑通信。  
  
#### UDP和TCP的特点  

###### UDP首部字段8个字节  
###### TCP首部字段20个字节  


#### TCP的三次握手  

![image](https://user-images.githubusercontent.com/87803098/127798160-1333f49b-5b9e-46a8-8d78-a3e5260d92c3.png)  
- 三次握手的原因   

#### TCP的四次挥手  
![image](https://user-images.githubusercontent.com/87803098/127798188-88636308-1605-4922-85c2-714165f86f69.png)  
- 四次挥手的原因   
- TIME_WAIT  

#### TCP可靠传输  
- 超时重传
加权平均往返时间RTTs  
超时时间RTO  

#### TCP滑动窗口  

#### TCP流量控制  

#### TCP拥塞控制  

- 慢开始与拥塞避免  


- 快重传与快恢复

## HTTP  
 
- URL，统一资源定位符  
- URI，统一资源标识符  
- URN，统一资源名称  

#### HTTP方法  
1. GET：获取资源  
2. HEAD：获取报文首部  
3. POST：传输实体主体  
4. PUT：上传文件  
5. PATCH：对资源进行部分修改  
6. DELETE：删除文件  
7. OPTIONS：查询支持的方法  
8. CONNECT：要求在与代理服务器通讯时建立隧道，使用SSL安全套接字和TLS传输层安全协议把通信内容加密后经网络隧道传输    
9. TRACE：追踪路径  

#### HTTP状态码  
- 100 正在处理  

成功
- 200 OK  
- 204  
- 206  

重定向
- 301 永久性重定向  
- 302 临时性重定向  
- 303  
- 304  
- 307  

客户端错误
- 400 请求报文有语法错误  
- 401 发送请求需要有认证信息  
- 403 请求被拒绝  
- 404 Not Found  

服务器错误
- 500 服务器正在执行请求时发生错误  
- 503 服务器暂时处于超负载或正在进行停机维护


### 具体应用  

#### 连接管理  
1. 短链接与长连接
2. 流水线  


#### Cookie  
用来保存状态信息。  
Cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器之后向同一服务器再次发起请求时被携带上，用于告知服务端两个请求是否来自同一浏览器。  
- 用途  
  1. 会话状态管理  
  2. 个性化设置  
  3. 浏览器行为跟踪  

##### Session  
- Cookie 只能存储 ASCII 码字符串，而 Session 则可以存储任何类型的数据，因此在考虑数据复杂性时首选 Session；  
- Cookie 存储在浏览器中，容易被恶意查看。如果非要将一些隐私数据存在 Cookie 中，可以将 Cookie 值进行加密，然后在服务器进行解密；  
- 对于大型网站，如果用户所有的信息都存储在 Session 中，那么开销是非常大的，因此不建议将所有的用户信息都存储到 Session 中。  

#### 缓存
- 优点  
  1. 缓解服务器压力；  
  2. 降低客户端获取资源的延迟：缓存通常位于内存中，读取缓存的速度更快。并且缓存服务器在地理位置上也有可能比源服务器来得近，例如浏览器缓存。  

- 实现方法  
  1. 让代理服务器进行缓存；  
  2. 让客户端浏览器进行缓存。  

### HTTPS  
让 HTTP 先和 SSL（Secure Sockets Layer）通信，再由 SSL 和 TCP 通信，也就是说 HTTPS 使用了隧道进行通信。  
通过使用 SSL，HTTPS 具有了加密（防窃听）、认证（防伪装）和完整性保护（防篡改）。  

#### GET和POST比较  

##### 1.作用  
- GET用于获取资源  
- POST用于传输实体主体  

##### 2.参数  
- GET 的参数是以查询字符串出现在 URL   
- POST 的参数存储在实体主体中   


##### 3.安全  
- GET安全  
- POST不安全  


##### 4.幂等性  
- GET幂等  
- POST不幂等  


##### 5.可缓存  

##### 6.XMLHttpRequest  

> XMLHttpRequest 是一个 API，它为客户端提供了在客户端和服务器之间传输数据的功能。它提供了一个通过 URL 来获取数据的简单方式，并且不会使整个页面刷新。这使得网页只更新一部分页面而不会打扰到用户。XMLHttpRequest 在 AJAX 中被大量使用。

- GET 方法 Header 和 Data 会一起发送  
- POST 方法时，浏览器会先发送 Header 再发送 Data


